"use strict";!function(){var e,t={slidesLeft:document.getElementById("things-left"),byWhom:document.getElementById("by-whom"),demoElement:document.getElementsByClassName("demo")},n=!0;window.CanvasSlideshow=function(a){function i(){document.getElementsByClassName("scene-nav--prev")[0].style.visibility="visible",n=!1}function r(){d.rotation+=.001,P=requestAnimationFrame(r)}var o=this;a=a||{},a.stageWidth=a.hasOwnProperty("stageWidth")?a.stageWidth:1920,a.stageHeight=a.hasOwnProperty("stageHeight")?a.stageHeight:1080,a.pixiSprites=a.hasOwnProperty("sprites")?a.sprites:[],a.centerSprites=!!a.hasOwnProperty("centerSprites")&&a.centerSprites,a.texts=a.hasOwnProperty("texts")?a.texts:[],a.autoPlay=!a.hasOwnProperty("autoPlay")||a.autoPlay,a.autoPlaySpeed=a.hasOwnProperty("autoPlaySpeed")?a.autoPlaySpeed:[10,3],a.fullScreen=!a.hasOwnProperty("fullScreen")||a.fullScreen,a.displaceScale=a.hasOwnProperty("displaceScale")?a.displaceScale:[200,70],a.displacementImage=a.hasOwnProperty("displacementImage")?a.displacementImage:"",a.navElement=a.hasOwnProperty("navElement")?a.navElement:document.querySelectorAll(".scene-nav"),a.displaceAutoFit=!!a.hasOwnProperty("displaceAutoFit")&&a.displaceAutoFit,a.wacky=!!a.hasOwnProperty("wacky")&&a.wacky,a.interactive=!!a.hasOwnProperty("interactive")&&a.interactive,a.interactionEvent=a.hasOwnProperty("interactionEvent")?a.interactionEvent:"",a.displaceScaleTo=!1===a.autoPlay?[0,0]:[20,20],a.textColor=a.hasOwnProperty("textColor")?a.textColor:"#fff",a.displacementCenter=!!a.hasOwnProperty("displacementCenter")&&a.displacementCenter,a.dispatchPointerOver=!!a.hasOwnProperty("dispatchPointerOver")&&a.dispatchPointerOver;var s=new PIXI.autoDetectRenderer(a.stageWidth,a.stageHeight,{transparent:!0}),l=new PIXI.Container,c=new PIXI.Container,d=new PIXI.Sprite.fromImage(a.displacementImage),p=new PIXI.filters.DisplacementFilter(d),h=new PIXI.TextStyle({dropShadow:!0,dropShadowAlpha:.4,dropShadowBlur:2,dropShadowColor:"white",fill:"white",fontFamily:'"Comic Sans MS", cursive, sans-serif',fontSize:46,fontStyle:"italic",fontVariant:"small-caps",fontWeight:"bold",letterSpacing:3,wordWrap:!0,wordWrapWidth:400});if(this.currentIndex=0,this.initPixi=function(){document.body.appendChild(s.view),l.addChild(c),l.interactive=!0,!0===a.fullScreen?(s.view.style.objectFit="cover",s.view.style.width="100%",s.view.style.height="100%",s.view.style.top="50%",s.view.style.left="50%",s.view.style.webkitTransform="translate( -50%, -50% ) scale(1)",s.view.style.transform="translate( -50%, -50% ) scale(1)"):(s.view.style.maxWidth="100%",s.view.style.top="50%",s.view.style.left="50%",s.view.style.webkitTransform="translate( -50%, -50% )",s.view.style.transform="translate( -50%, -50% )"),d.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT,l.filters=[p],!1===a.autoPlay&&(p.scale.x=0,p.scale.y=0),!0===a.wacky&&(d.anchor.set(.5),d.x=s.width/2,d.y=s.height/2),d.scale.x=2,d.scale.y=2,p.autoFit=a.displaceAutoFit,l.addChild(d)},this.loadPixiSprites=function(e){for(var t=a.sprites,n=a.texts,i=0;i<t.length;i++){var r=new PIXI.Texture.fromImage(e[i]),o=new PIXI.Sprite(r);if(n){var l=new PIXI.Text(n[i],h);o.addChild(l),l.anchor.set(.5),l.x=o.width/2,l.y=o.height/2}!0===a.centerSprites&&(o.anchor.set(.5),o.x=s.width/2,o.y=s.height/2),0!==i&&TweenMax.set(o,{alpha:0}),c.addChild(o)}},!0===a.autoPlay){var w=new PIXI.ticker.Ticker;w.autoStart=a.autoPlay,w.add(function(e){d.x+=a.autoPlaySpeed[0]*e,d.y+=a.autoPlaySpeed[1],s.render(l)})}else{var u=new PIXI.ticker.Ticker;u.autoStart=!0,u.add(function(e){s.render(l)})}var y=!1,m=c.children;this.moveSlider=function(e){y=!0;var t=new TimelineMax({onComplete:function(){o.currentIndex=e,y=!1,!0===a.wacky&&d.scale.set(1)},onUpdate:function(){!0===a.wacky&&(d.rotation+=.02*t.progress(),d.scale.set(3*t.progress()))}});t.clear(),t.isActive()||t.to(p.scale,1,{x:a.displaceScale[0],y:a.displaceScale[1]}).to(m[o.currentIndex],.5,{alpha:0}).to(m[e],.5,{alpha:1}).to(p.scale,1,{x:a.displaceScaleTo[0],y:a.displaceScaleTo[1]})};for(var v=a.navElement,f=0;f<v.length;f++){v[f].onclick=function(e){if(y)return!1;var t;t="next"===this.getAttribute("data-nav")?o.currentIndex>=0&&o.currentIndex<m.length-1?o.currentIndex+1:0:o.currentIndex>0&&o.currentIndex<m.length?o.currentIndex-1:spriteImages.length-1,o.moveSlider(t);return window.setTimeout(function(){n&&i()},1500),!1}}for(var x=0;x<t.demoElement.length;x++)!function(n){var a=t.demoElement;a[n].onclick=function(t){if(y)return!1;var i=parseInt(e/a.length,10),r=i*n;o.moveSlider(r),window.setTimeout(function(){},1500)}}(x);if(this.init=function(){new FontFace("Comic Sans MS","url(fonts/comic-sans-ms.ttf)").load().then(function(t){document.fonts&&document.fonts.add(t),o.initPixi(),o.loadPixiSprites(a.pixiSprites),e=a.pixiSprites.length})},!0===a.interactive){var P,S,g;c.interactive=!0,c.buttonMode=!0,"hover"!==a.interactionEvent&&"both"!==a.interactionEvent||(c.pointerover=function(e){S=e.data.global.x,g=e.data.global.y,TweenMax.to(p.scale,1,{x:"+="+100*Math.sin(S),y:"+="+100*Math.cos(g)}),r()},c.pointerout=function(e){TweenMax.to(p.scale,1,{x:0,y:0}),cancelAnimationFrame(P)}),"click"!==a.interactionEvent&&"both"!==a.interactionEvent||(c.pointerup=function(e){!0===a.dispatchPointerOver?TweenMax.to(p.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(p.scale,1,{x:20,y:20})}}):(TweenMax.to(p.scale,1,{x:0,y:0}),cancelAnimationFrame(P))},c.pointerdown=function(e){S=e.data.global.x,g=e.data.global.y,TweenMax.to(p.scale,1,{x:"+="+1200*Math.sin(S),y:"+="+200*Math.cos(g)})},c.pointerout=function(e){!0===a.dispatchPointerOver?TweenMax.to(p.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(p.scale,1,{x:20,y:20})}}):(TweenMax.to(p.scale,1,{x:0,y:0}),cancelAnimationFrame(P))})}!0===a.displacementCenter&&(d.anchor.set(.5),d.x=s.view.width/2,d.y=s.view.height/2),this.init()}}();