"use strict";!function(){window.CanvasSlideshow=function(e){function t(){l.rotation+=.001,x=requestAnimationFrame(t)}var a=this;e=e||{},e.stageWidth=e.hasOwnProperty("stageWidth")?e.stageWidth:1920,e.stageHeight=e.hasOwnProperty("stageHeight")?e.stageHeight:1080,e.pixiSprites=e.hasOwnProperty("sprites")?e.sprites:[],e.centerSprites=!!e.hasOwnProperty("centerSprites")&&e.centerSprites,e.texts=e.hasOwnProperty("texts")?e.texts:[],e.autoPlay=!e.hasOwnProperty("autoPlay")||e.autoPlay,e.autoPlaySpeed=e.hasOwnProperty("autoPlaySpeed")?e.autoPlaySpeed:[10,3],e.fullScreen=!e.hasOwnProperty("fullScreen")||e.fullScreen,e.displaceScale=e.hasOwnProperty("displaceScale")?e.displaceScale:[200,70],e.displacementImage=e.hasOwnProperty("displacementImage")?e.displacementImage:"",e.navElement=e.hasOwnProperty("navElement")?e.navElement:document.querySelectorAll(".scene-nav"),e.displaceAutoFit=!!e.hasOwnProperty("displaceAutoFit")&&e.displaceAutoFit,e.wacky=!!e.hasOwnProperty("wacky")&&e.wacky,e.interactive=!!e.hasOwnProperty("interactive")&&e.interactive,e.interactionEvent=e.hasOwnProperty("interactionEvent")?e.interactionEvent:"",e.displaceScaleTo=!1===e.autoPlay?[0,0]:[20,20],e.textColor=e.hasOwnProperty("textColor")?e.textColor:"#fff",e.displacementCenter=!!e.hasOwnProperty("displacementCenter")&&e.displacementCenter,e.dispatchPointerOver=!!e.hasOwnProperty("dispatchPointerOver")&&e.dispatchPointerOver;var n=window.innerWidth,i=window.innerHeight,r=new PIXI.autoDetectRenderer(n,i,{transparent:!0}),o=new PIXI.Container,s=new PIXI.Container,l=new PIXI.Sprite.fromImage(e.displacementImage),c=new PIXI.filters.DisplacementFilter(l),d=new PIXI.TextStyle({fill:e.textColor,wordWrap:!0,wordWrapWidth:400,letterSpacing:20,fontSize:14});if(this.currentIndex=0,this.initPixi=function(){document.body.appendChild(r.view),o.addChild(s),o.interactive=!0,!0===e.fullScreen?(r.view.style.objectFit="cover",r.view.style.width="100%",r.view.style.height="100%",r.view.style.top="50%",r.view.style.left="50%",r.view.style.webkitTransform="translate( -50%, -50% ) scale(1)",r.view.style.transform="translate( -50%, -50% ) scale(1)"):(r.view.style.maxWidth="100%",r.view.style.top="50%",r.view.style.left="50%",r.view.style.webkitTransform="translate( -50%, -50% )",r.view.style.transform="translate( -50%, -50% )"),o.filters=[c],!1===e.autoPlay&&(c.scale.x=0,c.scale.y=0),!0===e.wacky&&(l.anchor.set(.5),l.x=r.width/2,l.y=r.height/2),l.scale.x=1,l.scale.y=1,o.addChild(l)},this.loadPixiSprites=function(t){for(var a=e.sprites,n=e.texts,i=0;i<a.length;i++){var o=new PIXI.Texture.fromImage(t[i]),l=new PIXI.Sprite(o);if(n){var c=new PIXI.Text(n[i],d);l.addChild(c),c.anchor.set(.5),c.x=l.width/2,c.y=l.height/2}!0===e.centerSprites&&(l.anchor.set(.5),l.x=r.width/2,l.y=r.height/2),0!==i&&TweenMax.set(l,{alpha:0}),s.addChild(l)}},!0===e.autoPlay){var p=new PIXI.ticker.Ticker;p.autoStart=e.autoPlay,p.add(function(t){l.x+=e.autoPlaySpeed[0]*t,l.y+=e.autoPlaySpeed[1],r.render(o)})}else{var h=new PIXI.ticker.Ticker;h.autoStart=!0,h.add(function(e){r.render(o)})}var w=!1,y=s.children;this.moveSlider=function(t){w=!0;var n=new TimelineMax({onComplete:function(){a.currentIndex=t,w=!1,!0===e.wacky&&l.scale.set(1)},onUpdate:function(){!0===e.wacky&&(l.rotation+=.02*n.progress(),l.scale.set(3*n.progress()))}});n.clear(),n.isActive()||n.to(c.scale,.8,{x:e.displaceScale[0],y:e.displaceScale[1],ease:Power2.easeIn}).to(y[a.currentIndex],.5,{alpha:0,ease:Power2.easeOut},.4).to(y[t],.8,{alpha:1,ease:Power2.easeOut},1).to(c.scale,.7,{x:e.displaceScaleTo[0],y:e.displaceScaleTo[1],ease:Power1.easeOut},.9)};for(var u=e.navElement,v=0;v<u.length;v++){u[v].onclick=function(e){return!w&&("next"===this.getAttribute("data-nav")?a.currentIndex>=0&&a.currentIndex<y.length-1?a.moveSlider(a.currentIndex+1):a.moveSlider(0):a.currentIndex>0&&a.currentIndex<y.length?a.moveSlider(a.currentIndex-1):a.moveSlider(spriteImages.length-1),!1)}}if(this.init=function(){a.initPixi(),a.loadPixiSprites(e.pixiSprites)},!0===e.interactive){var x,P,m;s.interactive=!0,s.buttonMode=!0,"hover"!==e.interactionEvent&&"both"!==e.interactionEvent||(s.pointerover=function(e){P=e.data.global.x,m=e.data.global.y,TweenMax.to(c.scale,1,{x:"+="+100*Math.sin(P),y:"+="+100*Math.cos(m)}),t()},s.pointerout=function(e){TweenMax.to(c.scale,1,{x:0,y:0}),cancelAnimationFrame(x)}),"click"!==e.interactionEvent&&"both"!==e.interactionEvent||(s.pointerup=function(t){!0===e.dispatchPointerOver?TweenMax.to(c.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(c.scale,1,{x:20,y:20})}}):(TweenMax.to(c.scale,1,{x:0,y:0}),cancelAnimationFrame(x))},s.pointerdown=function(e){P=e.data.global.x,m=e.data.global.y,TweenMax.to(c.scale,1,{x:"+="+1200*Math.sin(P),y:"+="+200*Math.cos(m)})})}!0===e.displacementCenter&&(l.anchor.set(.5),l.x=r.view.width/2,l.y=r.view.height/2),this.init()}}();