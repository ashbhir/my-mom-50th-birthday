"use strict";!function(){window.CanvasSlideshow=function(e){function t(){o.rotation+=.001,y=requestAnimationFrame(t)}var a=this;e=e||{},e.stageWidth=e.hasOwnProperty("stageWidth")?e.stageWidth:1920,e.stageHeight=e.hasOwnProperty("stageHeight")?e.stageHeight:1080,e.pixiSprites=e.hasOwnProperty("sprites")?e.sprites:[],e.texts=e.hasOwnProperty("texts")?e.texts:[],e.autoPlay=!e.hasOwnProperty("autoPlay")||e.autoPlay,e.autoPlaySpeed=e.hasOwnProperty("autoPlaySpeed")?e.autoPlaySpeed:[10,3],e.fullScreen=!e.hasOwnProperty("fullScreen")||e.fullScreen,e.displaceScale=e.hasOwnProperty("displaceScale")?e.displaceScale:[200,70],e.displacementImage=e.hasOwnProperty("displacementImage")?e.displacementImage:"",e.navElement=e.hasOwnProperty("navElement")?e.navElement:document.querySelectorAll(".scene-nav"),e.displaceAutoFit=!!e.hasOwnProperty("displaceAutoFit")&&e.displaceAutoFit,e.wacky=!!e.hasOwnProperty("wacky")&&e.wacky,e.interactive=!!e.hasOwnProperty("interactive")&&e.interactive,e.interactionEvent=e.hasOwnProperty("interactionEvent")?e.interactionEvent:"",e.displaceScaleTo=!1===e.autoPlay?[0,0]:[20,20],e.textColor=e.hasOwnProperty("textColor")?e.textColor:"#fff",e.displacementCenter=!!e.hasOwnProperty("displacementCenter")&&e.displacementCenter,e.dispatchPointerOver=!!e.hasOwnProperty("dispatchPointerOver")&&e.dispatchPointerOver;var n=new PIXI.autoDetectRenderer(e.stageWidth,e.stageHeight,{transparent:!0}),i=new PIXI.Container,r=new PIXI.Container,o=new PIXI.Sprite.fromImage(e.displacementImage),s=new PIXI.filters.DisplacementFilter(o),l=new PIXI.TextStyle({fill:e.textColor,wordWrap:!0,wordWrapWidth:400,letterSpacing:20,fontSize:14});if(this.currentIndex=0,this.initPixi=function(){document.body.appendChild(n.view),i.addChild(r),i.interactive=!0,!0===e.fullScreen?(n.view.style.objectFit="cover",n.view.style.width="100%",n.view.style.height="100%",n.view.style.top="50%",n.view.style.left="50%",n.view.style.webkitTransform="translate( -50%, -50% ) scale(1.2)",n.view.style.transform="translate( -50%, -50% ) scale(1.2)"):(n.view.style.maxWidth="100%",n.view.style.top="50%",n.view.style.left="50%",n.view.style.webkitTransform="translate( -50%, -50% )",n.view.style.transform="translate( -50%, -50% )"),o.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT,i.filters=[s],!1===e.autoPlay&&(s.scale.x=0,s.scale.y=0),!0===e.wacky&&(o.anchor.set(.5),o.x=n.width/2,o.y=n.height/2),o.scale.x=2,o.scale.y=2,s.autoFit=e.displaceAutoFit,i.addChild(o)},this.loadPixiSprites=function(t){for(var a=e.sprites,n=e.texts,i=0;i<a.length;i++){var o=new PIXI.Texture.fromImage(t[i]),s=new PIXI.Sprite(o);if(n){var c=new PIXI.Text(n[i],l);s.addChild(c),c.anchor.set(.5),c.x=s.width/2,c.y=s.height/2}0!==i&&TweenMax.set(s,{alpha:0}),r.addChild(s)}},!0===e.autoPlay){var c=new PIXI.ticker.Ticker;c.autoStart=e.autoPlay,c.add(function(t){o.x+=e.autoPlaySpeed[0]*t,o.y+=e.autoPlaySpeed[1],n.render(i)})}else{var d=new PIXI.ticker.Ticker;d.autoStart=!0,d.add(function(e){n.render(i)})}var p=!1,h=r.children;this.moveSlider=function(t){p=!0;var n=new TimelineMax({onComplete:function(){a.currentIndex=t,p=!1,!0===e.wacky&&o.scale.set(1)},onUpdate:function(){!0===e.wacky&&(o.rotation+=.02*n.progress(),o.scale.set(3*n.progress()))}});n.clear(),n.isActive()||n.to(s.scale,1.5,{x:e.displaceScale[0],y:e.displaceScale[1],ease:Power2.easeOut}).to(h[a.currentIndex],1.5,{alpha:0,ease:Power2.easeOut},0).to(h[t],1,{alpha:1,ease:Power2.easeOut},1).to(s.scale,1.5,{x:e.displaceScaleTo[0],y:e.displaceScaleTo[1],ease:Expo.easeOut},.8)};for(var w=e.navElement,u=0;u<w.length;u++){w[u].onclick=function(e){return!p&&("next"===this.getAttribute("data-nav")?a.currentIndex>=0&&a.currentIndex<h.length-1?a.moveSlider(a.currentIndex+1):a.moveSlider(0):a.currentIndex>0&&a.currentIndex<h.length?a.moveSlider(a.currentIndex-1):a.moveSlider(spriteImages.length-1),!1)}}if(this.init=function(){a.initPixi(),a.loadPixiSprites(e.pixiSprites)},!0===e.interactive){var y,x,v;r.interactive=!0,r.buttonMode=!0,"hover"!==e.interactionEvent&&"both"!==e.interactionEvent||(r.pointerover=function(e){x=e.data.global.x,v=e.data.global.y,TweenMax.to(s.scale,1,{x:"+="+100*Math.sin(x),y:"+="+100*Math.cos(v)}),t()},r.pointerout=function(e){TweenMax.to(s.scale,1,{x:0,y:0}),cancelAnimationFrame(y)}),"click"!==e.interactionEvent&&"both"!==e.interactionEvent||(r.pointerup=function(t){!0===e.dispatchPointerOver?TweenMax.to(s.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(s.scale,1,{x:20,y:20})}}):(TweenMax.to(s.scale,1,{x:0,y:0}),cancelAnimationFrame(y))},r.pointerdown=function(e){x=e.data.global.x,v=e.data.global.y,TweenMax.to(s.scale,1,{x:"+="+1200*Math.sin(x),y:"+="+200*Math.cos(v)})},r.pointerout=function(t){!0===e.dispatchPointerOver?TweenMax.to(s.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(s.scale,1,{x:20,y:20})}}):(TweenMax.to(s.scale,1,{x:0,y:0}),cancelAnimationFrame(y))})}!0===e.displacementCenter&&(o.anchor.set(.5),o.x=n.view.width/2,o.y=n.view.height/2),this.init()}}();